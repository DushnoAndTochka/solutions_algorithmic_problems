# Minimum Speed to Arrive on Time Solution

## Описание

Самая сложная часть в этой задача - понять что вообще от нас хотят... Покрайней мере так было именно для меня.

Так чего же хотят ? Есть сколько-то поездов. Есть время через которое мы должны оказаться в офисе. Каждый из поездов стартует каждый час в `00` минут, если приехал раньше, жди отправки следующего поезда. Необходимо же сказать с какой минимальной скоростью должны двигаться ВСЕ поезда, что бы мы успели в офис. То есть если заставить все поезда двигаться с скоростью `v`, то со всеми вводными мы должны успеть в офис... Это до меня доходило дольше всего...

Идея вся сводится к бинарному поиску оптимальной скорости всех поездов. У нас есть нижнее ограничение. Так как каждый поезд стартует каждый час, то давайте предположим, что все кроме последнего, проехали маршрут за `1ч`, то есть максимально быстро. А вот последний тащился все остальное время которое осталось. Вот это самое время окажется нижней границей, ведь медленней попросту невозможно, так как тогда последний поезд никак не успеет к времени в офис. Стоит помнить, что последний поезд не ограничен пересадкой, ведь он идет на `конечную`. 

Максимальная скорость указана в условиях задачи, НО мы и тут можем срезать углы. Так как нам дается время не int, значит у нас может быть хвостик. Помним что пересадки каждый час. Значит в худшем случае мы сядем на последний час так, что у нас останутся только минуты. Тут мы можем посчитать скорость с которой последний поезд должен проехать свое растояние за минутки. Второй претендент на максимальную скорость будет поезд с самым большим расстоянием. Ведь если он ехал час, то его расстояние и есть скорость(`v = s / t, t=1`) Значит мы берем максимальное между двумя вариантами и получаем максимальную скорость на этой дистанции. Кто-то скажет:
- Любой из поездов может просто начать двигаться со скоростью света и все

А тут опять идем читать описание задачи. Нам надо найти минимальную скорость всех поездов. Значит и максимальная скорость, как бы минимальна среди всех максимальных, простите что так запутано... Простыми словами, поезду нет смысла ехать быстрее чем за 1 час, ведь тогда это будет "слишком" быстро и бесмысленно, ведь пересесть быстрее не получится. Значит скорость каждого из поездов не превысит расстояния, которое он пройдет(`v = s / t, t=1`)

УРА. Теперь у нас есть максимальная и минимальная скорость ВСЕХ поездов. Осталось найти те, которые позволят нам не опоздать и окажутся в офисе вовремя. А уж из них мы выберим самую маленькую. Бинарный поиск нам в помощь.


```python
from math import ceil


class Solution:
    def min_speed_on_time(self, dist: list[int], hour: float) -> int:
        if len(dist) - 1 >= hour:
        # Если у нас поездов больше, чем часов,
        # то из-за переседок мы точно не успеем
            return -1
        if len(dist) == 1:
        # Если всего один поезд, то нечего мучаться.
        # наш алгоритм даст ошибку на нем,
        # так как ждет больше
            return ceil(round(dist[0] / hour, 2))

        # Считаем сколько времени есть у последнего
        # поезда, если остальные проехали свои
        # участки ровно за 1 час
        hour_for_last = round(hour - len(dist) + 1, 2)
        # Значя число ранее, считаем минимально возможную скорость
        min_speed = ceil(dist[-1] / hour_for_last)
        max_speed = min_speed
        if round(hour % 1, 2):
            # Если есть хвостик у времени(минуты),
            # то пытаемся посчитать максимальную
            # скорость для последнего поезда,
            # когда он едет за минуты
            max_speed = ceil(dist[-1] / round(hour % 1, 2))
        # смотрим какое расстояние максимальное.
        # Помним что расстояние и скорость в
        # этом вопросе равны, значит берем
        # максимальную всех, если бы они ехали
        # за 1 час и последнего, если бы он
        # ехал за минуты
        result = max_speed = max(max_speed, max(dist))

        if hour_for_last <= 1:
        # Если крайнему остались изначально минуты,
        # то нам вообще нечего считать.
        # Оптимальной окажется максимальная
        # скорость всех поездов. Такое может
        # прозойти, если у нас например 3 поезда
        # и 2,5 часа. Первые два не смогут проехать
        # свое расстояние быстрее чем за час,
        # значит последнему останутся только минуты.
        # Получается что надо найти поезд, который
        # ехал быстрее всех и это будет ответом.
            return max_speed

        while min_speed <= max_speed:
            # Бин поиск в деле. Берем среднюю
            # скорость между максимальной и минимальной
            mid_speed = (min_speed + max_speed) // 2
            # Для проверки теории нам необходимо
            # посчитать, сколько времени уйдет
            # на дорогу при той или иной скорости,
            # возможно он вообще не успеет вовремя
            hours_count = 0

            for i in range(len(dist) - 1):
                # считаем время и не забываем о
                # пересадках, поэтому округляем вверх
                hours_count += ceil(dist[i] / mid_speed)
            # последний не имеет пересадки, поэтому
            # просто считаем его время
            hours_count += dist[-1] / mid_speed
            
            if 0 <= round(hour - hours_count, 2):
                # уложились по времени ?
                # Смотрим не оказалась ли эта
                # скорость оптимальной
                result = min(result, mid_speed)

            if round(hour - hours_count, 2) > 0:
                # Есть запас по времени ?
                # Замедляем поезда
                max_speed = mid_speed - 1
            else:
                # Опоздали ?
                # Ускоряем поезда
                min_speed = mid_speed + 1

        return result
```